import { createSignal, For, Show } from "solid-js"
import { SectionLayout } from "../../components/sectionLayout.jsx"
import { z } from "zod"
import { navigate } from "vite-plugin-ssr/client/router"

const data = {
	title: "Get started",
	checklist: [
		{
			text: "Autogenerated config file",
		},
		{
			text: " No extra accounts needed",
		},
		{
			text: "Access management via GitHub",
		},
		{
			text: "Data always stored in your repo",
		},
	],
}

const GetStarted = () => {
	const [input, setInput] = createSignal("")

	const isValidUrl = () =>
		z
			.string()
			.url()
			.regex(/github.com\/[a-zA-Z0-9-]+\/[a-zA-Z0-9-]+/)
			.safeParse(input()).success

	function navigateToEditor() {
		const url = new URL(input())
		return navigate(`/editor/${url.host}${url.pathname}`)
	}

	return (
		<>
			<SectionLayout showLines={true} type="lightGrey">
				<div class="relative">
					<div class="relative z-10 py-10">
						<div class="md:grid md:grid-cols-2">
							<div class="px-10 pt-10 pb-10 flex flex-col gap-8">
								<h2 class={"text-3xl font-semibold text-surface-900 flex gap-2"}>
									{data.title}
									<svg
										xmlns="http://www.w3.org/2000/svg"
										width="32"
										height="32"
										viewBox="0 0 128 128"
									>
										<path
											fill="#FFCA28"
											d="M115.1 45.22c-6.72 0-52.62.73-52.62.73c-3.65 0-4.33.1-3.32-1.24c1.01-1.34 4.87-2.66 7.43-12.18c1.92-7.12-1.01-16.06-5.35-18.37c-1.93-1.03-5.91-1.2-7.39 2.13c-1.42 3.19-1.57 9.61-5.64 14.97c-4.98 6.56-9.11 6.81-16.8 11.03c-6.14 3.36-10.87 11.6-14.27 13.37c-2.46 1.29-5.62 1.23-8.78 1.09c-1.21-.05-2.3.75-2.59 1.93C5.07 61.5 4 67.4 4 77.26c0 9.73 1.04 15.6 1.75 18.47c.3 1.22 1.44 2.04 2.69 1.92c3.34-.31 6.9-.76 9.43.22c3.48 1.34 8.32 5.77 14.42 9.38c14.28 8.45 29.28 7.51 37.88 6.79c6.65-.55 15.01-4.69 16.26-10.16c.64-2.8-.08-4.77-1.78-6.82c-.39-.48-.05-1.2.54-1.39c2.54-.82 6.46-2.56 6.8-7.75c.28-4.25-2.21-6.05-3.56-7.55c-.4-.45-.07-.92.5-1.12c2.43-.83 6.66-3.87 6.51-8.52c-.17-5.37-4.26-7.4-7.26-8.35c-.54-.17 3.08-1.4 3.65-1.44c0 0 14.88-1.17 21.28-2.23c6.07-1 11.73-2.61 10.7-8.5c-.41-2.48-1.98-4.99-8.71-4.99z"
										/>
										<path
											fill="#FFB300"
											d="M75.03 61.04c2.26 1.57 6.51 4.25 6.74 9.05c.22 4.63-3.52 6.3-3.93 8.64c-.55 3.19 1.72 3.56 1.48 7.99c-.23 4.25-3.1 5.08-3.51 8.08c-.26 1.91 1.8 3.6 1.43 8.22c-.15 1.92-2.08 5.91-5.68 7.39c-2.64 1.08 2.15 3.13 3.55 2.73c4.54-1.3 10.06-4.16 11.3-9.15l.03-.14c.64-2.8-.08-4.77-1.78-6.82c-.39-.48-.05-1.2.54-1.39c2.54-.82 6.46-2.56 6.8-7.75c.28-4.25-2.21-6.05-3.56-7.55c-.4-.45-.07-.92.5-1.12c2.43-.83 6.66-3.87 6.51-8.52c-.17-5.37-4.26-7.4-7.26-8.35c-.2-.04-10.55-1.97-13.16-1.31z"
										/>
										<path
											fill="#EDA600"
											d="M58.29 44.9c-.37-1.56 1.08-2.86 1.81-3.68c2.3-2.55 3.76-5.52 4.52-7.73c2.77-8.08.23-14.23-1.3-17.68c0 0 7.72 7.33 4.76 19.34c-1 4.05-2.87 6.92-5.28 9.49c-2.01 2.15-4.17 1.71-4.51.26zm11.89 69.13c5.51-.46 12-3.08 14.86-7.04c.29-.4-.21-.89-.59-.57c-2.04 1.7-6.01 3.91-13.23 4.35c-17.08 1.04-27.84-.43-37.4-6.09c-2.63-1.56-5.07-3.31-7.23-4.86c-2.88-2.07-4.73-3.32-7.04-4.11c-6.3-2.15-11.1 1.94-11.1 1.94c3.34-.31 6.9-.76 9.43.22c3.48 1.34 8.32 5.77 14.42 9.38c14.27 8.45 29.27 7.5 37.88 6.78zm12.68-50.79c-5.89.35-8.52-2.15-8.52-2.15s1.52-.9 7.9-1.8c0 0 30.29-2.18 34.97-2.73c5.92-.69 6.75-5.09 6.75-5.09s1.1 6.83-7.25 8.18c-6.23 1.02-27.96 3.24-33.85 3.59zm-3.4 29.73c-2.4-.18-3.4.44-3.65 1.78s1.2 1.98 3.93 1.89c6.9-.21 11.62-3.07 12.03-7.41c0 0-2.5 4.47-12.31 3.74zm1.98-16.29c-2.16-.08-3.4.73-3.57 2.29c-.17 1.56 1.51 2.1 3.12 2.08c6.93-.09 14-3.6 14.38-9.04c0 0-2.65 5.11-13.93 4.67z"
										/>
									</svg>
								</h2>
								<div class="flex flex-col gap-2 text-surface-700 font-medium text-left ml-1">
									<For each={data.checklist}>
										{(item) => (
											<div class="flex flex-row items-center gap-4">
												<div class="rounded ring-2 ring-surface-500">
													<svg
														class="w-5 h-5"
														fill="none"
														stroke="currentColor"
														viewBox="0 0 24 24"
														xmlns="http://www.w3.org/2000/svg"
													>
														<path
															stroke-linecap="round"
															stroke-linejoin="round"
															stroke-width="2"
															d="M5 13l4 4L19 7"
														/>
													</svg>
												</div>

												{item.text}
											</div>
										)}
									</For>
								</div>
							</div>
							<div class="justify-center px-10 md:pt-10 pb-10 flex flex-col gap-8">
								<div class="rounded-lg bg-background border border-surface-200 shadow-sm p-6">
									<p class="text-base font-semibold text-left text-surface-900 pb-3">
										Open your repository
									</p>
									<p class="text-sm font-medium text-left text-surface-600 pb-6">
										We check your repo structure to generate the config that fits to your needs.
									</p>
									<div class="flex flex-row gap-2">
										<sl-input
											class="border-none p-0 w-full max-w-xl"
											prop:placeholder="Paste a link of a repository on GitHub"
											// when pressing enter
											on:sl-change={() => (isValidUrl() ? navigateToEditor : undefined)}
											onInput={(event) => {
												// @ts-ignore
												setInput(event.target.value)
											}}
										>
											<Show when={input().length > 10 && isValidUrl() === false}>
												<p slot="help-text" class="text-danger p-2">
													The url must be a link to a GitHub repository like
													https://github.com/inlang/example
												</p>
											</Show>
										</sl-input>
										<sl-button
											class="w-32"
											prop:variant={isValidUrl() ? "primary" : "default"}
											prop:disabled={isValidUrl() === false}
											onClick={navigateToEditor}
										>
											Open
										</sl-button>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</SectionLayout>
		</>
	)
}

export default GetStarted
